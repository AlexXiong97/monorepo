<!doctype html>
<html>
  <head>
    <style>body { font-family: sans-serif; } fieldset { display: inline-block; } iframe { display: block }</style>
  </head>
  <body>
    <fieldset>
      <legend>Pick a user</legend>
      <button onclick="pl.connectAs('0x1234')">Alice (0x1234)</button>
      <button onclick="pl.connectAs('0x9876')">Bob (0x9876)</button>
      <label id="current-user"></label>
    </fieldset>
    <fieldset>
      <legend>Setup</legend>
      <button onclick="pl.deposit()">Deposit</button>
    </fieldset>
    <fieldset>
      <legend>Open a dApp</legend>
      <span id="dapp-list"></span>
    </fieldset>

    <script src="https://cdn.ethers.io/scripts/ethers-v4.min.js"
        charset="utf-8"
        type="text/javascript">
    </script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/node_modules/eventemitter3/umd/eventemitter3.js"></script>
    <script>
      var EventEmitter = EventEmitter3.EventEmitter;
    </script>
    <script src="/node_modules/lodash/lodash.min.js"></script>
    <!-- THIS MUST NOT BE LOADED LIKE THIS! -->
    <script src="/node_modules/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <script src="/node_modules/@counterfactual/cf.js/dist/index-iife.js"></script>
    <script src="/node_modules/@counterfactual/machine/dist/index-iife.js"></script>
    <script src="/node_modules/@counterfactual/node-poc/dist/node-poc.iife.js"></script>
    <script src="/scripts/playground.iife.js"></script>

    <script>
      const pl = new playground({
        // TODO: How do we get a list of available apps?
        '0x822c045f6F5e7E8090eA820E24A5f327C4E62c96': {
          name: 'High Roller',
          version: '0.0.1',
          url: 'dapps/high-roller.html',
          address: '0x822c045f6F5e7E8090eA820E24A5f327C4E62c96'
        },
        '0xd545e82792b6EF2000908F224275ED0456Cf36FA': {
          name: 'Tic-Tac-Toe',
          version: '0.0.1',
          url: 'dapps/tic-tac-toe.html',
          address: '0xd545e82792b6EF2000908F224275ED0456Cf36FA'
        }
      });

      pl.showAppList();
    </script>
  </body>
</html>
